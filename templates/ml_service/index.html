<!DOCTYPE html>
<html>
<head>
    <title>Car Price Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Car Price Prediction</h1>
        <p class="text-muted">AutoPriceAI</p>
        
        <form id="prediction-form">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Seller Type</label>
                        <select class="form-select" name="seller" required>
                            <option value="private">Private</option>
                            <option value="commercial">Commercial</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Vehicle Type</label>
                        <select class="form-select" name="vehicleType" required>
                            <option value="sedan">Sedan</option>
                            <option value="suv">SUV</option>
                            <option value="coupe">Coupe</option>
                            <option value="convertible">Convertible</option>
                            <option value="wagon">Wagon</option>
                            <option value="small">Small</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Fuel Type</label>
                        <select class="form-select" name="fuelType" required>
                            <option value="benzin">Benzin</option> 
                            <option value="diesel">Diesel</option>
                            <option value="lpg">Lpg</option>
                            <option value="cng">Cng</option>
                            <option value="electric">Electric</option>
                            <option value="andere">Andere</option>
                            <option value="hybrid">Hybrid</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Brand</label>
                        <input type="text" class="form-control" name="brand" value="volkswagen" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Count of picture</picture></label>
                        <input type="number" class="form-control" name="nrOfPictures" value="0" min="0" max="30" required>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Model</label>
                        <input type="text" class="form-control" name="model" value="golf" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Gearbox</label>
                        <select class="form-select" name="gearbox" required>
                            <option value="manual">Manual</option>
                            <option value="automatic">Automatic</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Damage repaired</label>
                        <select class="form-select" name="notRepairedDamage" required>
                            <option value="no">No Damage</option>
                            <option value="yes">Has Damage</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Power (PS)</label>
                        <input type="number" class="form-control" name="powerPS" value="100" min="50" max="1000" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Kilometers</label>
                        <input type="number" class="form-control" name="kilometer" value="50000" min="0" max="500000" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-control" name="age" value="5" min="0" max="50" required>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary btn-lg">Predict Price</button>
        </form>
        
        <div id="result" class="mt-4"></div>
    </div>

    <script>
        document.getElementById('prediction-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = 'Predicting...';
            submitBtn.disabled = true;
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());
            
            
            data.powerPS = parseFloat(data.powerPS);
            data.kilometer = parseFloat(data.kilometer);
            data.age = parseFloat(data.age);
            data.nrOfPictures = parseFloat(data.nrOfPictures); 
            
            try {
                const response = await fetch('/predict/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                document.getElementById('result').innerHTML = 
                    `<div class="alert alert-success">
                        <h4>Predicted Price: ${result.prediction} â‚¬</h4>
                    </div>`;
                
            } finally {                
                submitBtn.innerHTML = 'Predict Price';
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>